<!-- 
  Bubble.io Integration Guide for AU Asset Map
  1. Add an HTML element to your Bubble page.
  2. Copy and paste the content below into the HTML element.
  3. Replace 'https://your-backend-url.com' with your actual server URL.
-->

<div class="au-map-wrapper">
    <div class="state-tabs-container" id="au-state-tabs"></div>
    <div id="au-map-canvas" style="width: 100%; height: 500px; position: relative;">
        <div id="map-loading"
            style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); z-index: 1000;">
            Loading Map...
        </div>
    </div>
</div>

<!-- Styles -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet@1.9.4/dist/leaflet.css">
<style>
    .au-map-wrapper {
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        width: 100%;
        display: flex;
        flex-direction: column;
        border-radius: 8px;
        overflow: hidden;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }

    .state-tabs-container {
        display: flex;
        justify-content: center;
        gap: 10px;
        padding: 12px;
        background: #2d7699;
        flex-wrap: wrap;
    }

    .state-tab {
        padding: 8px 14px;
        background: #f0f4f8;
        border-radius: 6px;
        cursor: pointer;
        font-weight: 600;
        font-size: 14px;
        transition: all 0.2s ease;
    }

    .state-tab.active {
        background: #ffffff;
        color: #2d7699;
    }

    #au-map-canvas {
        background: #eee;
    }
</style>

<!-- Scripts -->
<script src="https://cdn.jsdelivr.net/npm/leaflet@1.9.4/dist/leaflet.js"></script>
<script src="https://your-backend-url.com/au-map.js"></script>

<script>
    // Initialize the map when everything is loaded
    (function () {
        const checkReady = setInterval(() => {
            if (window.AuAssetExplorer) {
                clearInterval(checkReady);
                window.AuAssetExplorer.init({
                    containerId: 'au-map-canvas',
                    tabsContainerId: 'au-state-tabs',
                    apiBaseUrl: 'https://your-backend-url.com',
                    bubbleCallback: 'bubble_fn_mapsClick' // Optional: Bubble Toolbox function name
                });
            }
        }, 100);
    })();
</script>